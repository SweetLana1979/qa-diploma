## План автоматизации тестирования ##

### 1. Перечень автоматизируемых сценариев ###

**1.1. Сценарии с покупкой по дебетовой карте**

**UI тесты**

**Позитивные тесты (ввод валидных данных)**

_1.1.1. Покупка по активной карте (со статусом APPROVED)_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  поля валидными данными (номер карты – 4444 4444 4444 4441, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  В правом верхнем углу появляется сообщение «Успешно. Операция одобрена Банком»

_1.1.2. Покупка по неактивной карте co статусом DECLINED_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  поля валидными данными (номер карты – 4444 4444 4444 4442, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  В правом верхнем углу появляется сообщение «Ошибка! Банк отказал в проведении операции»

**Негативные тесты (ввод невалидных данных и остутствие данных в полях)**

_1.1.3. Покупка по карте, отсутствующей в базе данных_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  поля валидными данными (номер карты – 4444 4444 4444 4443, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  В правом верхнем углу появляется сообщение «Ошибка! Банк отказал в проведении операции»

_1.1.4. Покупка по карте с невалидным номером (менее 16 цифр)_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля с номером карты (номер карты – 4444 4444 4444 444, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Номер карты» появляется сообщение «Неверный формат»

_1.1.5. Покупка по карте с несуществующим месяцем года_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля с месяцем (номер карты – 4444 4444 4444 4441, месяц – 13, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Месяц» появляется сообщение «Неверно указан срок действия карты»

_1.1.6. Покупка по карте с истекшим сроком действия_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля с годом (номер карты – 4444 4444 4444 4441, месяц – 12, год – 22, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Год» появляется сообщение «Истёк срок действия карты»

_1.1.7. Покупка по карте с невалидным полем Владелец_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля Владелец  (номер карты – 4444 4444 4444 4441, месяц – 12, год – 24, Владелец  – &&& ***, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Владелец » появляется сообщение «Неверный формат»

_1.1.8. Покупка по карте с невалидным полем CVC/CVV_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля CVC/CVV (номер карты – 4444 4444 4444 4441, месяц – 12, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 99)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем CVC/CVV появляется сообщение «Неверный формат»

_1.1.9. Покупка по карте с пустым полем номера карты_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, оставив поле «Номер карты» пустым (месяц – 12, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Номер карты» появляется сообщение «Неверный формат»

_1.1.10. Покупка по карте с пустым полем месяца_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, оставив поле «Месяц» пустым (номер карты – 4444 4444 4444 4441, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Месяц» появляется сообщение «Неверный формат»

_1.1.11. Покупка по карте с пустым полем года_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, оставив поле «Год» пустым (номер карты – 4444 4444 4444 4441, месяц -12,  Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Год» появляется сообщение «Неверный формат»

_1.1.12. Покупка по карте с пустым полем Владелец_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, оставив поле «Владелец» пустым (номер карты – 4444 4444 4444 4441, месяц -12, год – 24, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Владелец» появляется сообщение «Поле обязательно для заполнения»

_1.1.13. Покупка по карте с пустым полем CVC/CVV_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, оставив поле CVC/CVV пустым (номер карты – 4444 4444 4444 4441, месяц -12,  год – 24, Владелец  – Ivan Ivanov)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем CVC/CVV появляется сообщение «Неверный формат»

_1.1.14. Покупка по карте с нулями в поле Номер карты_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля Номер карты, его заполнить нулями (номер карты – 0000 0000 0000 0000, месяц -12,  год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Номер карты появляется сообщение «Ошибка! Банк отказал в проведении операции»

_1.1.15. Покупка по карте с нулями в поле Месяц_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля Месяц, его заполнить нулями (номер карты – 4444 4444 4444 4441, месяц - 00,  год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Месяц появляется сообщение «Неверный формат»

_1.1.16. Покупка по карте с нулями в поле Год_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля Год, его заполнить нулями (номер карты – 4444 4444 4444 4441, месяц - 12,  год – 00, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Год появляется сообщение «Истёк срок действия карты»


_1.1.17. Покупка по карте с нулями в поле CVC/CVV_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля CVC/CVV, его заполнить нулями (номер карты – 4444 4444 4444 4441, месяц - 00,  год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 000)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: В правом верхнем углу появляется сообщение «Успешно. Операция одобрена Банком»

_1.1.18. Покупка по карте с большим сроком действия_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить»
3.	Заполнить  все поля валидными данными, кроме поля Год, его заполнить годом, на 6 (или более) лет больше текущего (номер карты – 4444 4444 4444 4441, месяц -12,  год – 30, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Год появляется сообщение «Неверно указан срок действия карты»

**1.2. Сценарии с покупкой в кредит**

**UI тесты**

**Позитивные тесты (ввод валидных данных)**

_1.2.1. Покупка в кредит по активной карте (со статусом APPROVED)_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  поля валидными данными (номер карты – 4444 4444 4444 4441, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  В правом верхнем углу появляется сообщение «Успешно. Операция одобрена Банком»

_1.2.2. Покупка в кредит по неактивной карте co статусом DECLINED_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  поля валидными данными (номер карты – 4444 4444 4444 4442, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  В правом верхнем углу появляется сообщение «Ошибка! Банк отказал в проведении операции»

**Негативные тесты (ввод невалидных данных и отсутствие данных в полях)**

_1.2.3. Покупка в кредит по карте, отсутствующей в базе данных_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  поля валидными данными (номер карты – 4444 4444 4444 4443, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: В правом верхнем углу появляется сообщение «Ошибка! Банк отказал в проведении операции»

_1.2.4. Покупка в кредит по карте с невалидным номером (менее 16 цифр)_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля с номером карты (номер карты – 4444 4444 4444 444, месяц – 10, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Номер карты» появляется сообщение «Неверный формат»

_1.2.5. Покупка в кредит по карте с несуществующим номером месяца_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля с месяцем (номер карты – 4444 4444 4444 4441, месяц – 13, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Месяц» появляется сообщение «Неверно указан срок действия карты»

_1.2.6. Покупка в кредит по карте с истекшим сроком действия_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля с годом (номер карты – 4444 4444 4444 4441, месяц – 12, год – 22, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Год» появляется сообщение «Истёк срок действия карты»

_1.2.7. Покупка в кредит по карте c невалидным полем Владелец_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля Владелец  (номер карты – 4444 4444 4444 4441, месяц – 12, год – 24, Владелец  – &&& ***, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Владелец» появляется сообщение «Неверный формат»

_1.2.8. Покупка в кредит по карте c невалидным полем CVC/CVV_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля CVC/CVV (номер карты – 4444 4444 4444 4441, месяц – 12, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 99)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем CVC/CVV появляется сообщение «Неверный формат»

_1.2.9. Покупка в кредит по карте c пустым полем номера карты_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, оставив поле «Номер карты» пустым (месяц – 12, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Номер карты» появляется сообщение «Неверный формат»

_1.2.10. Покупка в кредит по карте c пустым полем месяца_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, оставив поле «Месяц» пустым (номер карты – 4444 4444 4444 4441, год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Месяц» появляется сообщение «Неверный формат»

_1.2.11. Покупка в кредит по карте c пустым полем года_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, оставив поле «Год» пустым (номер карты – 4444 4444 4444 4441, месяц -12,  Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Год» появляется сообщение «Неверный формат»

_1.2.12. Покупка в кредит по карте c пустым полем Владелец_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, оставив поле «Владелец» пустым (номер карты – 4444 4444 4444 4441, месяц -12, год – 24, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем «Владелец» появляется сообщение «Поле обязательно для заполнения»

_1.2.13. Покупка в кредит по карте c пустым полем CVC/CVV_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, оставив поле CVC/CVV пустым (номер карты – 4444 4444 4444 4441, месяц -12,  год – 24, Владелец  – Ivan Ivanov)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат:  Под полем CVC/CVV появляется сообщение «Неверный формат»

_1.2.14. Покупка в кредит по карте с нулями в поле Номер карты_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля Номер карты, его заполнить нулями (номер карты – 0000 0000 0000 0000, месяц -12,  год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Номер карты появляется сообщение «Ошибка! Банк отказал в проведении операции»

_1.2.15. Покупка в кредит по карте с нулями в поле Месяц_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля Месяц, его заполнить нулями (номер карты – 4444 4444 4444 4441, месяц - 00,  год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Месяц появляется сообщение «Неверный формат»

_1.2.16. Покупка в кредит по карте с нулями в поле Год_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля Год, его заполнить нулями (номер карты – 4444 4444 4444 4441, месяц - 12,  год – 00, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Год появляется сообщение «Истёк срок действия карты»


_1.2.17. Покупка в кредит по карте с нулями в поле CVC/CVV_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля CVC/CVV, его заполнить нулями (номер карты – 4444 4444 4444 4441, месяц - 00,  год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 000)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: В правом верхнем углу появляется сообщение «Успешно. Операция одобрена Банком»

_1.2.18. Покупка по карте с большим сроком действия_
1.	Открыть главную страницу сервиса [http://localhost:8080](http://localhost:8080)
2.	Нажать кнопку «Купить в кредит»
3.	Заполнить  все поля валидными данными, кроме поля Год, его заполнить годом, на 6 (или более) лет больше текущего (номер карты – 4444 4444 4444 4441, месяц -12,  год – 30, Владелец  – Ivan Ivanov, CVC/CVV - 999)
4.	Нажать кнопку «Продолжить»

Ожидаемый результат: Под полем Год появляется сообщение «Неверно указан срок действия карты»


**API тесты**

Необходимо убедиться, что при попытке обратиться к приложению через API сервис отдает те же данные, что и при UI-тестах.
Для этого выполняются 4 теста, которые проверяют статус карт в БД (approved или declined) при обращении напрямую к Payment Gate или Credit Gate.

**Предусловия для активной карты со статусом APPROVED:**
Номер карты – 4444 4444 4444 4441, Месяц – 10, Год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999

**Предусловия для неактивной карты со статусом DECLINED:**
Номер карты – 4444 4444 4444 4442, Месяц – 10, Год – 24, Владелец  – Ivan Ivanov, CVC/CVV - 999

_1.3.1. Покупка по активной карте (со статусом APPROVED)_
1. Обращаемся к URL-адресу [http://localhost:8080/api/v1/pay](http://localhost:8080/api/v1/pay)

Ожидаемый результат: ответ от сервера - 200 ok, в таблице БД "payment_entity" в поле "status" - APPROVED, "amount" - 4 500 000

_1.3.2. Покупка в кредит по активной карте (со статусом APPROVED)_
1. Обращаемся к URL-адресу [http://localhost:8080/api/v1/credit](http://localhost:8080/api/v1/credit)

Ожидаемый результат: ответ от сервера - 200 ok, в таблице БД "payment_entity" в поле "status" - APPROVED

_1.3.3. Покупка по неактивной карте (со статусом DECLINED)_
1. Обращаемся к URL-адресу [http://localhost:8080/api/v1/pay](http://localhost:8080/api/v1/pay)

Ожидаемый результат: ответ от сервера - 200 ok, в таблице БД "payment_entity" в поле "status" - DECLINED

_1.3.4. Покупка в кредит по неактивной карте (со статусом DECLINED)_
1. Обращаемся к URL-адресу [http://localhost:8080/api/v1/credit](http://localhost:8080/api/v1/credit)

Ожидаемый результат: ответ от сервера - 200 ok, в таблице БД "payment_entity" в поле "status" - DECLINED

### 2. Перечень используемых инструментов ###
- IntelliJ IDEA
- JUnit
- Gradle
- Selenide
- Docker
- Allure
- Github

### 3. Перечень возможных рисков при автоматизации ###
- Неправильное функционирование приложения
- Неправильное функционирование БД
- Неправильное определение полей ввода

### 4. Интервальная оценка (в часах) ###
30 часов (+6 часов на случай реализации риска)

### 5. План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации) ###
- авто-тесты: с 2 октября по 20 октября
- отчет: с 23 октября по 25 октября
